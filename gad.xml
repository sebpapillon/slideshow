<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="gad" height="400" scaling="false" />
  <UserPref name="scroll" display_name="Display scrollbar" default_value="auto" datatype="enum">
    <EnumValue value="auto" display_value="Automatic"/>
  </UserPref>
  <UserPref name="album" diplay_name="nom de l'album" required="true" />
  <Content type="html">
  <![CDATA[
    <style>
<style>
.rslides {
  display: block;
  height: auto;
  float: left;
  width: 50%;
  border: 0;
  }

  
ul.rslides {
	list-style-type: none;
}
  
.caption {
    position: absolute;
    display: block;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 15px;
    text-align: center;
    background: #000;
    background: rgba(0,0,0, .8);
    color: #fff;
}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/ResponsiveSlides.js/1.53/responsiveslides.min.js"></script>
<div id="info">..info...</div>
<ul class="rslides" id="coin-slider"></ul>
<script type="text/javascript">

//$("#coin-slider").hide();

var prefs = new _IG_Prefs();
var rss="https://picasaweb.google.com/data/feed/base/user/107793413718694936117/albumid/6243671204235356865?alt=rss&kind=photo&hl=fr";
var image_delay = 2000;
var picasaweb = "https://picasaweb.google.com/data/feed/api/user/sebastien.papillon?alt=json";
var albumName = "prefs.getString('album');
var albumid = "";

var viewport={width:400,height:300};

//alert(viewport.width);


$.getJSON(picasaweb,
  function(data) {
    $.each(data.feed.entry, function(i,item) {
		if(item.title.$t == albumName) {
			albumid = item.id.$t;
			json = albumid.replace('rss','json').replace('entry','feed').replace('api','base');

			$.getJSON(json,
			  function(datas) {
			    $.each(datas.feed.entry, function(y,iteme) {
					var img = new Image();
					var size = "";
					if(iteme.media$group.media$content[0].width/iteme.media$group.media$content[0].height < 1) {
						img.src.height=viewport.height;
						size = "height="+viewport.height;
					} else {
						size = "width="+viewport.width;
						img.src.width=viewport.width;
					}
			        img.src = iteme.media$group.media$thumbnail[2].url.replace("s288","s1600");
			        $("#coin-slider").append($("<li>").append("<img src="+img.src+" "+size+"><p class=\"caption\">caption ninja</p>"));
			        $("#info").append(" <br> "+iteme.media$group.media$content[0].width/iteme.media$group.media$content[0].height+" - "+img.src);
			    })
			    
				$('#coin-slider').responsiveSlides({pager: false});
		
			  })
		} 
    })
  })
  
</script>
  ]]>
  </Content>
</Module>

